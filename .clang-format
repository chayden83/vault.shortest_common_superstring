---
Language: Cpp
# 1. Base Style (Reset)
BasedOnStyle: LLVM

# 2. General Settings
IndentWidth: 2
TabWidth: 2
UseTab: Never
ColumnLimit: 80
PointerAlignment: Left

# 3. String Handling (The Fix)
# Forces multi-line strings to drop to a new line immediately
AlwaysBreakBeforeMultilineStrings: true
# Allows strings to be broken at all
BreakStringLiterals: true

# 4. Vertical Alignment
AlignConsecutiveAssignments: true
AlignConsecutiveDeclarations: true
# (Safely omitted BitFields)

# 5. Vertical Spacing
SeparateDefinitionBlocks: Always
EmptyLineBeforeAccessModifier: Always
SortIncludes: CaseSensitive
FixNamespaceComments: true
NamespaceIndentation: All

# 6. Brace Wrapping
BreakBeforeBraces: Custom
BraceWrapping:
  AfterFunction: true           # New line for functions
  AfterControlStatement: false  # Same line for logic
  AfterClass: false
  AfterEnum: false
  AfterNamespace: false
  AfterStruct: false
  AfterUnion: false
  BeforeElse: false
  BeforeCatch: false
  SplitEmptyFunction: false

# 7. Logic Control Blocks
InsertBraces: true
RemoveBracesLLVM: false
AllowShortBlocksOnASingleLine: Never
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false

# 8. Constructor Initializers
BreakConstructorInitializers: BeforeComma
ConstructorInitializerIndentWidth: 4
PackConstructorInitializers: Never
ConstructorInitializerAllOnOneLineOrOnePerLine: true

# 9. Short Functions
AllowShortFunctionsOnASingleLine: All

# 10. Arguments & Parameters
AlignAfterOpenBracket: DontAlign
ContinuationIndentWidth: 2
BinPackArguments: false
BinPackParameters: false

# 11. Penalties (Tuned for Strings & Method Chains)
# 1. Cheap to break strings (Standard was 1000 -> Now 10)
PenaltyBreakString: 10
# 2. Cheap to break after '='
PenaltyBreakAssignment: 10
# 3. Expensive to break inside function calls
PenaltyBreakBeforeFirstCallParameter: 200
# 4. Global limits
PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 60

# Helps align the 'requires' clause body correctly
IndentRequiresClause: true

# --- Binary Operators ---
# Moves &&, ||, +, -, etc. to the start of the next line.
# We use 'NonAssignment' so that 'auto x =' keeps the '=' on the first line.
BreakBeforeBinaryOperators: NonAssignment

# Stops lines from trying to align vertically with the '=' or '(' above.
# Instead, it just uses the continuation indent (4 spaces).
AlignOperands: DontAlign
